<template>
    <div class="scroll-screen-box">
        <!-- 大会议程 -->
        <div class="container-item">
            <div class="ca sc-item">
                <div class="ca-header header">
                    <div class="circle wow fadeIn" data-wow-delay="0.2s"></div>
                    <div class="fir ca-header-item wow fadeInLeft " data-wow-delay="0s">
                        <p class="title">大会议程</p>
                        <p class="title-en">Conference Agenda</p>
                    </div>
                    <div class="ca-header-item ca-header-item-day wow fadeInDown" data-wow-delay="0.2s">
                        <svg t="1704528346985" class="icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="2346" width="20" height="20">
                            <path
                                d="M833 128c0-53-43-96-96-96h-16c-53 0-96 43-96 96H400c0-53-43-96-96-96h-16c-53 0-96 43-96 96H64c-35.3 0-64 28.7-64 64v736c0 35.3 28.7 64 64 64h896c35.3 0 64-28.7 64-64V192c0-35.3-28.7-64-64-64H833zM729 96c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m-433 0c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m632 832H96c-17.7 0-32-14.3-32-32V448h896v448c0 17.7-14.3 32-32 32z m32-544H64V224c0-17.7 14.3-32 32-32h96v32c0 53 43 96 96 96h16c53 0 96-43 96-96v-32h225v24c0 57.4 46.6 104 104 104s104-46.6 104-104v-24h95c17.7 0 32 14.3 32 32v160z"
                                p-id="2347" fill="#8a8a8a"></path>
                            <path
                                d="M304 560v64H144v-64h160m48-48H96v160h256V512zM304 752v64H144v-64h160m48-48H96v160h256V704zM592 560v64H432v-64h160m48-48H384v160h256V512zM592 752v64H432v-64h160m48-48H384v160h256V704zM880 560v64H720v-64h160m48-48H672v160h256V512zM880 752v64H720v-64h160m48-48H672v160h256V704z"
                                p-id="2348" fill="#8a8a8a"></path>
                        </svg>
                        <span>5月5日</span>
                    </div>
                    <div class="ca-header-item ca-header-item-day wow fadeInDown" data-wow-delay="0.4s">
                        <svg t="1704528346985" class="icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="2346" width="20" height="20">
                            <path
                                d="M833 128c0-53-43-96-96-96h-16c-53 0-96 43-96 96H400c0-53-43-96-96-96h-16c-53 0-96 43-96 96H64c-35.3 0-64 28.7-64 64v736c0 35.3 28.7 64 64 64h896c35.3 0 64-28.7 64-64V192c0-35.3-28.7-64-64-64H833zM729 96c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m-433 0c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m632 832H96c-17.7 0-32-14.3-32-32V448h896v448c0 17.7-14.3 32-32 32z m32-544H64V224c0-17.7 14.3-32 32-32h96v32c0 53 43 96 96 96h16c53 0 96-43 96-96v-32h225v24c0 57.4 46.6 104 104 104s104-46.6 104-104v-24h95c17.7 0 32 14.3 32 32v160z"
                                p-id="2347" fill="#8a8a8a"></path>
                            <path
                                d="M304 560v64H144v-64h160m48-48H96v160h256V512zM304 752v64H144v-64h160m48-48H96v160h256V704zM592 560v64H432v-64h160m48-48H384v160h256V512zM592 752v64H432v-64h160m48-48H384v160h256V704zM880 560v64H720v-64h160m48-48H672v160h256V512zM880 752v64H720v-64h160m48-48H672v160h256V704z"
                                p-id="2348" fill="#8a8a8a"></path>
                        </svg>
                        <span>5月6日</span>
                    </div>
                    <div class="ca-header-item ca-header-item-day wow fadeInDown" data-wow-delay="0.6s">
                        <svg t="1704528346985" class="icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="2346" width="20" height="20">
                            <path
                                d="M833 128c0-53-43-96-96-96h-16c-53 0-96 43-96 96H400c0-53-43-96-96-96h-16c-53 0-96 43-96 96H64c-35.3 0-64 28.7-64 64v736c0 35.3 28.7 64 64 64h896c35.3 0 64-28.7 64-64V192c0-35.3-28.7-64-64-64H833zM729 96c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m-433 0c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m632 832H96c-17.7 0-32-14.3-32-32V448h896v448c0 17.7-14.3 32-32 32z m32-544H64V224c0-17.7 14.3-32 32-32h96v32c0 53 43 96 96 96h16c53 0 96-43 96-96v-32h225v24c0 57.4 46.6 104 104 104s104-46.6 104-104v-24h95c17.7 0 32 14.3 32 32v160z"
                                p-id="2347" fill="#8a8a8a"></path>
                            <path
                                d="M304 560v64H144v-64h160m48-48H96v160h256V512zM304 752v64H144v-64h160m48-48H96v160h256V704zM592 560v64H432v-64h160m48-48H384v160h256V512zM592 752v64H432v-64h160m48-48H384v160h256V704zM880 560v64H720v-64h160m48-48H672v160h256V512zM880 752v64H720v-64h160m48-48H672v160h256V704z"
                                p-id="2348" fill="#8a8a8a"></path>
                        </svg>
                        <span>5月7日</span>
                    </div>
                    <div class="ca-header-item ca-header-item-day wow fadeInDown" data-wow-delay="0.8s">
                        <svg t="1704528346985" class="icon" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="2346" width="20" height="20">
                            <path
                                d="M833 128c0-53-43-96-96-96h-16c-53 0-96 43-96 96H400c0-53-43-96-96-96h-16c-53 0-96 43-96 96H64c-35.3 0-64 28.7-64 64v736c0 35.3 28.7 64 64 64h896c35.3 0 64-28.7 64-64V192c0-35.3-28.7-64-64-64H833zM729 96c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m-433 0c22.1 0 40 17.9 40 40v80c0 22.1-17.9 40-40 40s-40-17.9-40-40v-80c0-22.1 17.9-40 40-40z m632 832H96c-17.7 0-32-14.3-32-32V448h896v448c0 17.7-14.3 32-32 32z m32-544H64V224c0-17.7 14.3-32 32-32h96v32c0 53 43 96 96 96h16c53 0 96-43 96-96v-32h225v24c0 57.4 46.6 104 104 104s104-46.6 104-104v-24h95c17.7 0 32 14.3 32 32v160z"
                                p-id="2347" fill="#8a8a8a"></path>
                            <path
                                d="M304 560v64H144v-64h160m48-48H96v160h256V512zM304 752v64H144v-64h160m48-48H96v160h256V704zM592 560v64H432v-64h160m48-48H384v160h256V512zM592 752v64H432v-64h160m48-48H384v160h256V704zM880 560v64H720v-64h160m48-48H672v160h256V512zM880 752v64H720v-64h160m48-48H672v160h256V704z"
                                p-id="2348" fill="#8a8a8a"></path>
                        </svg>
                        <span>5月8日</span>
                    </div>
                </div>
                <div class="ca-bodyer">
                    <div class="live-box wow fadeIn" data-wow-delay="0.2s">
                        <img :src="liveImgs[activeImgIndex]" alt="">
                        <div class="live-nav">
                            <div class="nav-item" v-for="(nav, index) in liveImgs" :key="nav"
                                @mouseenter="activeImgIndex = index">
                                <div class="nav-title">
                                    <p>平行论坛</p>
                                    <p>08:30 - 12:10</p>
                                </div>
                                <div class="nav-project">
                                    <p>教育技术产业融合创新发展论坛</p>
                                </div>
                                <div class="nav-footer">
                                    <svg t="1704531051640" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="3445" width="16" height="16">
                                        <path
                                            d="M511.773949 64.85436a294.60093 294.60093 0 0 1 294.884668 293.952386c0 2.188835 0.091201 4.418203 0.243204 6.586771 3.202184 46.614071-6.455036 101.274136-28.708188 162.551373-19.78058 54.477662-49.502117 114.113273-88.364065 177.244939C627.478181 806.626102 555.347973 894.980033 509.291244 947.714735c-45.144715-47.110612-114.984753-126.597737-175.512112-223.321935-37.899267-60.578026-67.073595-119.970432-86.732573-176.545728-22.577424-64.975962-32.761585-126.881475-30.268746-183.973579 0.101335-2.330704 0.121602-4.701941 0.060801-7.093445-1.976031-74.845985 26.519353-146.378317 80.105268-201.393055a300.275686 300.275686 0 0 1 214.830067-90.532633m0-64.85436C313.542545 0 146.887107 160.463873 152.034922 358.482474v2.563774c-12.302061 281.883395 240.650209 561.750225 329.520949 651.036439a40.442774 40.442774 0 0 0 58.774264-1.520024c87.867524-97.869283 347.923374-409.261412 331.365245-649.627883 0-0.780279-0.081068-1.560558-0.081068-2.340837C870.945502 160.443606 710.106689 0 511.773949 0z"
                                            fill="#ffffff" p-id="3446"></path>
                                        <path
                                            d="M512.321158 204.2507a161.12255 161.12255 0 1 1-113.951137 47.201814 160.109201 160.109201 0 0 1 113.951137-47.201814m0-64.85436c-124.824376 0-225.97691 101.182935-225.97691 225.97691s101.182935 225.97691 225.97691 225.976911 225.97691-101.182935 225.976911-225.976911-101.182935-225.97691-225.976911-225.97691z"
                                            fill="#ffffff" p-id="3447"></path>
                                    </svg>
                                    <span>杭州洲际酒店 国际1号厅</span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>

        <!-- 大会亮点 -->
        <div class="container-item">
            <div class="ch sc-item">
                <div class="ch-header header">
                    <div class="circle wow fadeIn" data-wow-delay="0.2s"></div>
                    <div class="ch-header-item header-item wow fadeInDown" data-wow-delay="0.2s">
                        <span><span>更</span>前沿</span>
                    </div>
                    <div class="ch-header-item header-item wow fadeInDown" data-wow-delay="0.4s">
                        <span><span>更</span>精彩</span>
                    </div>
                    <div class="ch-header-item header-item wow fadeInDown" data-wow-delay="0.6s">
                        <span><span>更</span>显著</span>
                    </div>
                    <div class="ch-header-item header-item wow fadeInDown" data-wow-delay="0.8s">
                        <span><span>更</span>热门</span>
                    </div>
                    <div class="last header-item ch-header-item wow fadeInRight" data-wow-delay="0s">
                        <p class="title">大会亮点</p>
                        <p class="title-en">Conference Highlights</p>
                    </div>
                </div>
                <div class="ch-nums" ref="chNumRef">
                    <div class="ch-num-item">
                        <div>
                            <p data-odometer-final="500" :ref="setRef"></p>
                            <span>+</span>
                        </div>
                        <p>主演讲</p>
                    </div>
                    <div class="ch-num-item">
                        <div>
                            <p data-odometer-final="550" :ref="setRef"></p>
                            <span>+</span>
                        </div>
                        <p>合作伙伴</p>
                    </div>
                    <div class="ch-num-item">
                        <div>
                            <p data-odometer-final="10000" :ref="setRef"></p>
                            <span>+</span>
                        </div>
                        <p>与会嘉宾</p>
                    </div>
                    <div class="ch-num-item">
                        <div>
                            <p data-odometer-final="10" :ref="setRef"></p>
                            <span>万+</span>
                        </div>
                        <p>行业从业者</p>
                    </div>
                    <div class="ch-num-item">
                        <div>
                            <p data-odometer-final="2500" :ref="setRef"></p>
                            <span>万+</span>
                        </div>
                        <p>直播观看</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>


<script setup>
import { onMounted, ref } from 'vue';
import WOW from "wow.js";
import { useIntersectionObserver } from '@vueuse/core'


const initWOW = () => {
    const wow = new WOW({
        boxClass: 'wow',
        animateClass: 'animated',
        offset: 0,
        mobile: true
    })
    wow.init();
}

const liveImgs = ref([
    'https://img2023.gcsis.cn/2023/5/933ffa78bfad4121a1b763c6beb9f11d.jpeg',
    'https://img2023.gcsis.cn/2023/4/4e2a3ecef60540aaad44363e3c70a12a.jpeg',
    'https://img2023.gcsis.cn/2023/5/45d149bf8b5245a9802d35d7c299033f.jpeg',
    'https://img2023.gcsis.cn/2023/5/45d149bf8b5245a9802d35d7c299033f.jpeg'
])
const activeImgIndex = ref(0)
const numList = ref([])
const chNumRef = ref()
let hasNumDone = false // 确保文字滚动只滚动一次

const setRef = (el) => {
    numList.value.push(el)
}

const observeNums = () => {
    const { stop } = useIntersectionObserver(
        chNumRef,
        ([{ isIntersecting }], observerElement) => {
            if (!hasNumDone && isIntersecting) {
                // 数字滚动
                numList.value.forEach((item, index) => {
                    const targetNum = parseInt(item.getAttribute('data-odometer-final'))
                    let i = 0
                    let step = 1
                    switch (true) {
                        case targetNum <= 600:
                            step = 1
                            break
                        case targetNum == 10000:
                            step = 50
                            break
                        default:
                            step = 20
                    }
                    const timer = setInterval(() => {
                        item.innerText = i + step
                        i += step
                        if (i >= targetNum) {
                            clearInterval(timer)
                        }
                    }, 10)
                })
                hasNumDone = true

                stop()
            }
        },
    )
}

onMounted(() => {
    initWOW()
    observeNums()
})

</script>


<style scoped lang="scss">
.scroll-screen-box {
    width: 100%;
    padding: .6667rem 0;

    .container-item {
        width: 100%;
        padding: .6667rem;
    }

    .sc-item {
        margin: 0 auto;
        width: 75%;

    }

    .header {
        width: 100%;
        display: flex;
        box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.1);

        .header-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: .3333rem .0033rem;
            gap: 10px;
            align-items: center;
        }

        .title {
            font-size: .3833rem;
            color: white;
            font-weight: 300;
        }

        .title-en {
            color: white;
            font-size: .1467rem;
        }
    }

    .ca {


        .ca-header {
            width: 100%;
            display: flex;
            box-shadow: 0 0 15px 0 rgba(0, 0, 0, 0.1);
            padding-right: .6667rem;
            position: relative;
            background-color: white;

            .circle {
                position: absolute;
                left: 100%;
                bottom: 100%;
                // transform: translate(-50%, -50%);
                transform: translate(calc(1.9667rem / -2), calc(1.9667rem / 2));
                height: 1.9667rem;
                width: 1.9667rem;
                border-radius: 50%;
                z-index: -1;
                background: linear-gradient($theme-color-green, $theme-color-blue);
            }

            .title {
                font-size: .3833rem;
                color: white;
                font-weight: 300;
            }

            .title-en {
                color: white;
                font-size: .1467rem;
            }

            .fir {
                flex: 1.3 !important;
                position: relative;
                scale: 1.2;
                left: 0.1667rem;
                @include clip-path;
                background-image: linear-gradient(to right, $theme-color-blue, $theme-color-green);
                p {
                    position: relative;
                    right: .2667rem;
                }
            }

            // .fir::after {
            //     position: absolute;
            //     left: 100%;
            //     top: 0;
            //     height: 100%;
            //     content: '';
            //     // border-top: .7433rem solid $theme-color-green;
            //     // border-left: .74333rem solid $theme-color-green;
            //     // border-right: .7433rem solid transparent;
            //     // border-bottom: .7433rem solid transparent;
            //     width: .7433rem;
            //     background-color: $theme-color-green;
            //     @include clip-path;
            // }

            .ca-header-item {
                flex: 1;
                display: flex;
                flex-direction: column;
                padding: .3333rem .0033rem;
                gap: 10px;
                align-items: center;
            }

            .ca-header-item-day {
                flex-direction: row;
                justify-content: flex-end;
                color: grey;
                align-items: center;
                cursor: pointer;
            }
        }

        // .ca-header::after {
        //     position: absolute;
        //     left: 100%;
        //     bottom: 100%;
        //     content: '';

        // }

        .ca-bodyer {
            width: 100%;
            margin-top: 1rem;
            position: relative;

            .live-box {
                width: 95%;
                height: 70vh;
                margin: 0 auto;
                overflow: hidden;
                position: relative;

                img {
                    width: 100%;
                    height: 100%;
                    transition: all 0.3s;
                    scale: 1;
                    cursor: pointer;
                }

                img:hover {
                    scale: 1.1;
                }
            }

            .live-nav {
                position: absolute;
                width: 30%;
                top: 0;
                left: 0%;
                height: 100%;
                overflow: scroll;
                background-color: rgba(0, 0, 0, 0.194);

                .nav-item {
                    width: 100%;
                    color: white;
                    padding: .3333rem;
                    font-size: .25rem;
                    line-height: 1.6;
                    cursor: pointer;

                    .nav-title {
                        display: flex;
                        justify-content: space-between;
                        font-size: .1667rem;
                        align-items: center;

                        p:first-child {
                            border: .0167rem solid white;
                            border-radius: 18%;
                            padding: .0433rem;
                        }
                    }

                    .nav-project {
                        font-size: .3033rem;
                        margin-top: .1667rem;
                        margin-bottom: .1667rem;
                    }

                    .nav-footer {
                        display: flex;
                        align-items: center;
                        font-size: .2rem;
                        gap: .1667rem;
                    }
                }

                .nav-item:hover {
                    background-color: rgba(241, 241, 241, 0.254);
                }
            }
        }
    }

    .ch {
        .ch-header {
            width: 100%;
            padding-left: .6667rem;
            position: relative;
            background-color: white;

            .circle {
                position: absolute;
                right: 100%;
                bottom: 100%;
                // transform: translate(-50%, -50%);
                transform: translate(calc(1.9667rem / 2), calc(1.9667rem / 2));
                height: 1.9667rem;
                width: 1.9667rem;
                border-radius: 50%;
                z-index: -1;
                background: linear-gradient($theme-color-green, $theme-color-blue);
            }

            .last {
                flex: 1.3 !important;
                position: relative;
                scale: 1.2;
                left: 0.1667rem;
                align-items: center !important;
                @include clip-path-right;
                background-image: linear-gradient(to right, $theme-color-blue, $theme-color-green);
                p {
                    position: relative;
                    left: .2667rem;
                }
            }

            // .last::before {
            //     content: '';
            //     position: absolute;
            //     right: 100%;
            //     top: 0;
            //     border-top: .7433rem solid $theme-color-blue;
            //     border-left: .74333rem solid transparent;
            //     border-right: .7433rem solid $theme-color-blue;
            //     border-bottom: .7433rem solid transparent;
            // }

            .ch-header-item {
                height: 100%;
                display: flex;
                align-items: flex-start;
                justify-content: center;

                span {
                    display: block;
                    line-height: 100%;
                    height: 100%;
                    font-size: .3167rem;
                    font-weight: 400;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    transform: translateY(35%);
                    @include linear-txt;

                    span {
                        font-size: .5rem;
                        transform: translateY(-10%);
                    }
                }

            }
        }

        .ch-nums {
            margin-top: .9667rem;
            display: flex;
            justify-content: space-between;
            width: 100%;

            .ch-num-item {
                display: flex;
                flex-direction: column;
                gap: .25rem;
                align-items: center;
                position: relative;

                div {
                    min-width: 2.5rem;
                    display: flex;
                    align-items: flex-end;
                    gap: 5px;
                    width: 100%;
                    justify-content: center;
                    color: $theme-color-blue;
                }

                p:first-child {
                    font-size: .8333rem;
                    @include linear-txt;
                    text-align: center;
                    width: fit-content;

                    span {
                        font-size: .5333rem;
                    }
                }

                p:last-child {
                    font-size: .2367rem;
                    color: grey;
                }

            }
        }
    }
}</style>